import{_ as C}from"./uploader-CugjJYdL.js";import{h as f}from"./http-CiWzU4pP.js";import{e as V,f as h,i as k,m as q,r as d,o as p,c as _,a as e,b as c,w as u,d as m}from"./index-BPnDSaWA.js";const j={class:"w-full h-full grid justify-items-center items-center pt-16"},z={class:"w-[85%] h-[90%] flex flex-col gap-y-10 bg-gray-100 rounded-xl p-7"},S={class:"flex justify-between"},U=e("h2",{class:"text-[1.3vw]"},"Create Category",-1),B={class:"flex gap-x-4"},N={class:"grid grid-cols-2 w-full place-items-center"},R={class:"grid w-1/2"},L=e("label",{id:"name-label",class:"text-[.8rem] translate-y-[50%] bg-gray-100 w-fit z-10 px-1 ml-2 text-gray-500"}," Category name ",-1),T={class:"grid w-1/2"},E={class:"grid col-[1/-1] w-full place-items-center py-7"},F=e("header",{class:"flex justify-between place-self-start pb-5"},[e("h2",{class:"text-[1.2vw]"},"Select picture")],-1),H={class:"h-[33vh] aspect-square grid grid-cols-1 grid-rows-1 overflow-hidden"},I={key:0,class:"bg-slate-400 h-[33vh] w-[100%] aspect-square rounded-3xl overflow-hidden place-items-center grid"},O=["src"],P={key:1,class:"bg-slate-400 h-[33vh] w-[100%] aspect-square rounded-3xl overflow-hidden"},A=e("img",{class:"w-full h-full z-10",src:C,alt:"upload image here"},null,-1),D=[A],Q=V({__name:"CreateCategoryPage",setup(G){const n=h({selected:"",options:[]}),o=h({name:"",parent_id:"",picture:null}),r=k(null),g=q();f.get("/api/category").then(({status:s,data:t})=>{if(s==200){const{categories:a}=t.data;n.options=a.map(l=>({label:l.name,value:l.id,level:l.level}))}});const v=s=>{o.parent_id=s.value},w=s=>{r.value=null,o.picture=null,o.picture=s.target.files[0],r.value=URL.createObjectURL(s.target.files[0])},x=async()=>{const s=n.options.find(l=>l.value==o.parent_id);let t=1;t+=s.level??0;const{status:a}=await f.post("/api/category",{level:t,...o},{headers:{"Content-Type":"multipart/form-data"}});a==201&&g.push("/dashboard/categories")};return(s,t)=>{const a=d("ui-button"),l=d("router-link"),y=d("ui-textfield"),b=d("ui-select");return p(),_("div",j,[e("div",z,[e("header",S,[U,e("div",B,[c(l,{to:"/dashboard"},{default:u(()=>[c(a,{class:"w-36 text-[.8vw] font-semibold h-12",outlined:""},{default:u(()=>[m(" Cancel ")]),_:1})]),_:1}),c(a,{class:"w-36 text-[.8vw] font-semibold h-12",unelevated:"",onClick:x},{default:u(()=>[m(" submit ")]),_:1})])]),e("div",N,[e("section",R,[L,c(y,{modelValue:o.name,"onUpdate:modelValue":t[0]||(t[0]=i=>o.name=i),outlined:"",required:"","input-type":"text",attrs:{placeholder:"Category name",labelId:"#email-label",autocomplete:"off"},placeholder:"Category name"},null,8,["modelValue"])]),e("section",T,[c(b,{id:"full-func-js-select",modelValue:n.selected,"onUpdate:modelValue":t[1]||(t[1]=i=>n.selected=i),options:n.options,onSelected:t[2]||(t[2]=i=>v(i))},{default:u(()=>[m(" Select category ")]),_:1},8,["modelValue","options"])]),e("section",E,[F,e("section",H,[r.value?(p(),_("div",I,[e("img",{class:"w-[90%] h-[90%] z-10",src:r.value},null,8,O)])):(p(),_("div",P,D)),e("input",{type:"file",required:"",class:"h-[100%] aspect-square z-20 cursor-pointer opacity-0 rounded-3xl",onchange:w})])])])])])}}});export{Q as default};
