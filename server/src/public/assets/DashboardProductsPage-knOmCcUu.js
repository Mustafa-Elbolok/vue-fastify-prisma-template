import{e as k,f as u,g as C,h as p,r as d,o as _,c as f,a as m,b as o,w as s,d as g}from"./index-BXmR9VdA.js";const V={class:"w-full h-full grid justify-items-center items-center pt-16"},N={class:"w-[85%] h-[90%] flex flex-col gap-y-10 bg-gray-100 rounded-xl p-7"},P={class:"flex justify-between"},$=m("h2",{class:"text-[1.3vw]"},"Products",-1),B={key:0,class:"flex flex-col gap-y-7"},D={key:1,class:"text-center text-[1vw]"},A=k({__name:"DashboardProductsPage",setup(j){const e=u({page:1,total:0}),l=u({data:[]}),w=u({open:!1}),x=["Name","Category","Created at","actions"],y=["name",{fied:"category",fn:t=>t.category&&t.category.name},{fied:"created_at",fn:t=>t.created_at&&new Date(t.created_at).toLocaleDateString()},{slot:"actions"}],b=async t=>{const{status:a}=await p.delete(`/api/product/${t}`);if(a==202){const{status:n,data:c}=await p.get(`/api/product?page=${e.page}&limit=10`);if(n==200){w.open=!1;const{products:r}=c.data;l.data=r,e.total=c.pagination.total}}};return C(()=>e.page,async()=>{const{status:t,data:a}=await p.get(`/api/product?page=${e.page}&limit=10`);if(t==200){const{products:n}=a.data;l.data=n,e.total=a.pagination.total}},{immediate:!0}),(t,a)=>{const n=d("ui-button"),c=d("router-link"),r=d("ui-pagination"),h=d("ui-icon"),v=d("ui-table");return _(),f("div",V,[m("div",N,[m("header",P,[$,o(c,{to:"/dashboard/products/create"},{default:s(()=>[o(n,{class:"w-30 text-[.8vw] font-semibold h-12",unelevated:""},{default:s(()=>[g(" Add Product ")]),_:1})]),_:1})]),e.total>0?(_(),f("div",B,[o(r,{modelValue:e.page,"onUpdate:modelValue":a[0]||(a[0]=i=>e.page=i),total:e.total,"show-total":"","page-size":10,position:"right"},null,8,["modelValue","total"]),o(v,{class:"w-full max-h-[82%]",data:l.data,thead:x,tbody:y},{actions:s(({data:i})=>[o(c,{to:`/dashboard/products/${i.id}`},{default:s(()=>[o(h,null,{default:s(()=>[g("edit")]),_:1})]),_:2},1032,["to"]),o(h,{onClick:()=>b(i.id),class:"text-red-600 pl-4 cursor-pointer"},{default:s(()=>[g("delete ")]),_:2},1032,["onClick"])]),_:1},8,["data"])])):(_(),f("h2",D,"No products."))])])}}});export{A as default};
