import{e as B,f as m,g as D,h as _,r as s,o as w,c as h,a as y,b as t,w as o,d as l}from"./index-CSVR4rzK.js";const j={class:"w-full h-full grid justify-items-center items-center pt-16"},A={class:"w-[85%] h-[90%] flex flex-col gap-y-10 bg-gray-100 rounded-xl p-7"},S={class:"flex justify-between"},U=y("h2",{class:"text-[1.3vw]"},"Categories",-1),q={key:0,class:"flex flex-col gap-y-7"},z={key:1,class:"text-center text-[1vw]"},M=B({__name:"DashboardCategoriesPage",setup(E){const a=m({page:1,total:0}),p=m({data:[]}),d=m({open:!1}),C=["Name","Main Category","Sub Categories","products","created at","actions"],x=["name","parent","subCategoriesCount","productsCount",{fied:"created_at",fn:n=>n.created_at&&new Date(n.created_at).toLocaleDateString()},{slot:"actions"}],b=async n=>{const{status:e}=await _.post("/confirm",{});if(e==200){const{status:i}=await _.delete(`/api/category/${n}`);if(i==202){const{status:c,data:g}=await _.get(`/api/category?page=${a.page}&limit=10`);if(c==200){d.open=!1;const{categories:u,totalCategories:f}=g.data;p.data=u,a.total=f}}}};return D(()=>a.page,async()=>{const{status:n,data:e}=await _.get(`/api/category?page=${a.page}&limit=10`);if(n==200){const{categories:i,totalCategories:c}=e.data;p.data=i,a.total=c}},{immediate:!0}),(n,e)=>{const i=s("ui-button"),c=s("router-link"),g=s("ui-pagination"),u=s("ui-icon"),f=s("ui-dialog-title"),v=s("ui-dialog-content"),k=s("ui-dialog-actions"),V=s("ui-dialog"),N=s("ui-table");return w(),h("div",j,[y("div",A,[y("header",S,[U,t(c,{to:"/dashboard/categories/create"},{default:o(()=>[t(i,{class:"w-30 text-[.8vw] font-semibold h-12",unelevated:""},{default:o(()=>[l(" Add Category ")]),_:1})]),_:1})]),a.total>0?(w(),h("div",q,[t(g,{modelValue:a.page,"onUpdate:modelValue":e[0]||(e[0]=r=>a.page=r),total:a.total,"show-total":"","page-size":10,position:"right"},null,8,["modelValue","total"]),t(N,{class:"w-full max-h-[82%]",data:p.data,thead:C,tbody:x},{actions:o(({data:r})=>[t(c,{to:`/dashboard/categories/${r.id}`},{default:o(()=>[t(u,null,{default:o(()=>[l("edit")]),_:1})]),_:2},1032,["to"]),t(u,{onClick:e[1]||(e[1]=()=>d.open=!0),class:"text-red-600 pl-4 cursor-pointer"},{default:o(()=>[l("delete ")]),_:1}),t(V,{modelValue:d.open,"onUpdate:modelValue":e[3]||(e[3]=$=>d.open=$)},{default:o(()=>[t(f,null,{default:o(()=>[l("Confirm required")]),_:1}),t(v,null,{default:o(()=>[l(" Are you sure you want to delete this category ")]),_:1}),t(k,null,{default:o(()=>[t(i,{class:"w-22 text-[.7vw] font-semibold h-12",onClick:e[2]||(e[2]=()=>d.open=!1)},{default:o(()=>[l(" cancel ")]),_:1}),t(i,{class:"w-22 text-[.7vw] font-semibold h-12",onClick:()=>b(r.id)},{default:o(()=>[l(" Confirm ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["modelValue"])]),_:1},8,["data"])])):(w(),h("h2",z,"No categories."))])])}}});export{M as default};
